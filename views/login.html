<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>로그인</title>
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="apple-touch-icon" href="/favicon.png" />
    <!-- <link rel="stylesheet" href="/styles/login.css"> -->
  </head>

  <body>
    <div class="login-container">
      <h1>다음을 입력해주세요.</h1>
      <div class="login-box">
        <form class="userid-form">
          <label for="userId">userid</label>
          <input
            type="text"
            id="userId"
            placeholder="5글자이상 영문자로 입력하세요."
            autocomplete="off"
          />
        </form>
        <form class="password-form">
          <label for="userPwd">비밀번호</label>
          <input
            type="password"
            id="userPwd"
            placeholder="문자,숫자,특수문자를 포함한 8자리"
          />
        </form>
        <div>
          <a href="/searchid" id="searchId">아이디 찾기</a> &nbsp;
          <a href="/searchpwd" id="searchPwd">비밀번호 찾기</a> &nbsp;
          <a href="/register" id="registerBtn">회원가입</a> &nbsp;
        </div>
        <div>
          <button id="loginBtn">로그인</button>
          <button id="resetBtn">취소</button>
        </div>
      </div>
    </div>
    <div class="userid-view"></div>

    <script>
      const loginUrlPOST = "http://localhost:3000/login";

      loginBtn.addEventListener("click", () => {
        const user = {
          userId: userId.value,
          userPwd: userPwd.value,
        };

        console.log(JSON.stringify(user));
        fetch(loginUrlPOST, {
          method: "POST",
          body: JSON.stringify(user),
          headers: {
            "Content-Type": "application/json;charset=utf-8",
            authorization: "",
          },
        })
          .then((res) => res.json())
          .then((res) => {
            if (res.success) {
              window.location.href = "http://localhost:3000/";
            } else {
              alert(res.message);
            }
          });
      });
    </script>
  </body>
</html>
